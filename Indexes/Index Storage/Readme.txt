Страницы.
    Размер страницы 8КБ (8192 байта).
    
    Структура страницы (см. Структура страницы.jpg):
        - заголовок страницы (96 байт);
        - записи (8060 байт);
        - массив смещения (36 байт).
        
Экстенты.
    Страницы группируются вместе по восемь за раз в структуры, называемые экстентами.
        
    Экстенты бывают двух типов смешанные или однородные.
        
Типы страниц (см. Страницы файлов данных).
    File header page
        Содержится информация о метаданных файла базы данных.
    
    Page Free Space (PFS) page
        Отслеживают объем свободного места в базе данных.
        
        Один байт для каждой страницы. На каждые ~8000 страниц будет одна PFS.
        
        Байт на странице PFS представляет информацию:
            - биты 0-2 определяют, находится ли страница в одном из следующих состояний свободного пространства:
                - cтраница пуста;
                - от 1 до 50 процентов;
                - от 51 до 80 процентов;
                - от 81 до 95 процентов;
                - от 96 до 100 процентов.
            - бит 3 определяет, есть ли записи призраков на странице;
            - бит 4 определяет, является ли эта страница частью карты распределения индексов (IAM);
            - бит 5 указывает, является ли страница смешанной;
            - бит 6 определяет, была ли выделена страница.
    
    Global Allocation Map (GAM) page (см. https://technet.microsoft.com/ru-ru/library/ms175195(v=sql.105).aspx)
        На этой странице определяется, был ли определенный экстент размещен для использования.
        
        Растровое изображение 64000 бит:
            1 - экстент свободен; 
            0 - экстент размещен.
        
    Shared Global Allocation Map (SGAM) page (см. https://technet.microsoft.com/ru-ru/library/ms175195(v=sql.105).aspx)
        На этой странице определяется, был ли определенный экстент размещен для использования в качестве смешенного экстента.
        
        Растровое изображение 64000 бит:
            1 - смешанный экстент со свободными страницами;
            0 - экстент не используется как смешанный экстент, или он является смешанным экстентом, но все его страницы используются.
    
    Differential Changed Map (DCM) page
        Растровая страница, которая помогает дифференциальным резервным копиям идентифицировать экстенты, измененные с момента полной резервной копии.
        
        Первая страница DCM находится на странице 6 файла данных. Последующие страницы DCM появляются для каждой GAM страницы в файле данных.
        
    Bulk Changed Map (BCM) page
         Страницы BCM используются вместе с моделью восстановления BULK_LOGGED. 
         
         Страница BCM используется для определения экстентов, которые были изменены с минимально зарегистрированной операцией с момента последней резервной копии журнала транзакций.
         
         Первая страница BCM находится на странице 7 файла данных. Последующие страницы BCM появляются для каждой GAM страницы в файле данных.
         
    Index Allocation Map (IAM) page (см. https://technet.microsoft.com/ru-ru/library/ms187501(v=sql.105).aspx)
        Каждая таблица или индекс сначала начинается с страницы IAM. Эта страница показывает, какие экстенты в интервале GAM, связаны с таблицей или индексом.
        
        Если таблица или индекс пересекает более одного интервала GAM, для таблицы или индекса будет более одной страницы IAM.  
        
    Data page
        Страницы данных используются для хранения данных из строк в таблицах базы данных.
        
    Index page
        На этих страницах представлена ​​информация о структуре индексов и страницах данных.
        
    Large object (Text and Image) page
        Типы данных, которые могут использовать страницы LOB включают text, ntext , image , nvarchar(max), varchar(max), varbinary(max) и xml. 
        Когда данные для одного из этих типов данных сохраняются на странице данных, страница LOB будет использоваться, если размер строки превысит 8 КБ. 
        В этих случаях столбец будет содержать ссылки на страницы LOB, необходимые для данных, и вместо этого он будет сохранен на страницах LOB (см. Ссылка страницы данных на страницу LOB.jpg).
        
    Boot page
        Предоставляет информацию метаданных для базы данных. В базе данных есть одна загрузочная страница, и она находится в первом файле данных для базы данных. 
    
Можете проверить, является ли страница страницей PFS, GAM или SGAM с помощью недокументированного оператора DBCC PAGE, который имеет следующий синтаксис.
    
    Тип страницы будет отображаться как m_type в заголовке страницы:
        1 - Data page.
        2 - Index page.       
        8 - GAM page.
        9 - SGAM page.
        10 - IAM page.
        11 - PFS page.
        15 - File header page.
        16 - DCM map page.
        17 - BCM map page.
        
Индексы columnstore.
    Структура columnstore создает отклонение от традиционного метода хранения и индексирования данных от строки к формату по столбцам (см. Формат хранения columnstore.jpg).
    
    Индексы сolumnstore начинаются со страницы IAM (см. Структура хранения columnstore.jpg). На странице IAM находятся страницы LOB, содержащие информацию о столбце. 
    
    Для каждого столбца, хранящегося в columnstore, есть один или несколько сегментов. 
    Сегменты содержат около миллиона строк данных для столбцов, которые они представляют. Страница LOB может содержать один или несколько сегментов, а сегменты могут охватывать несколько страниц LOB.
    Внутри каждого сегмента есть хеш-словарь, который используется для отображения данных, содержащих сегмент столбца. Словарь хеш содержит также минимальные и максимальные значения для данных в сегменте. 
    Эта информация используется SQL Server во время выполнения запроса для исключения сегментов во время выполнения запроса.
    
    Одним из преимуществ структуры columnstore является его способность использовать сжатие. Cжатие columnstore является обязательным и не может быть отключено.
    Сжатие, используемое столбцом, похоже на сжатие на уровне страницы. Он использует сжатие словаря для удаления одинаковых значений во всем сегменте.