Типы репликации SQL Server.
    Репликация моментального снимка (Snapshot Replication).
        https://www.safaribooksonline.com/library/view/microsoft-sql-server/9780134084473/ch43lev2sec19.html
    Репликация транзакций (Transactional Replication).
        https://www.safaribooksonline.com/library/view/microsoft-sql-server/9780134084473/ch43lev2sec20.html
    Репликация слиянием (Merge Replication)
        https://www.safaribooksonline.com/library/view/microsoft-sql-server/9780134084473/ch43lev2sec21.html

Агенты репликации.
    The snapshot agent.
        Агент моментального снимка отвечает за подготовку схем и исходных файлов данных опубликованных таблиц и хранимых процедур, 
        сохранение моментального снимка на сервере распространения (distribution) и запись информации о состоянии синхронизации в базе данных распространения (distribution).
        
        Когда вы настраиваете подписку, можно вручную загрузить первоначальный снимок на сервер (это называется ручной синхронизацией). 
        Для чрезвычайно больших баз данных часто проще сбрасывать базу данных на ленту, а затем перезагружать базу данных на сервере подписки (subscription). 
        Если вы загружаете моментальный снимок таким образом, SQL Server предполагает, что базы данных уже синхронизированы и автоматически начинает отправлять изменения данных.
        
        Агент выполняет следующие задачи:
            1. Агент моментального снимка инициализируется (инициализация может быть немедленной или в назначенное время).
            2. Агент подключается к издателю (publisher).
            3. Агент генерирует файлы схемы с расширением .sch, для каждой статьи (article) в публикации.
               Эти файлы схемы записываются во временный рабочий каталог на сервере распространения (distribution).
               Это CREATE TABLE инструкции, которые будут использоваться для создания всех объектов, необходимых на стороне сервера подписки (subscription). 
               Они будут существовать только на время обработки моментальных снимков.
            4. Все таблицы в публикации (publication) заблокированы.
               Блокировка необходима для обеспечения того, чтобы во время моментального снимка не производились изменения данных.
            5. Агент извлекает копию данных в публикации (publication) и записывает их во временный рабочий каталог на сервере распространения (distribution).
               Если все подписчики (subscribers) являются SQL Server, данные будут записаны с использованием собственного формата SQL Server с расширением .bcp.
               Если вы реплицируетесь в базы данных, отличные от SQL Server, данные будут храниться в стандартных текстовых файлах с расширением .txt. 
               Файл .sch и файлы .txt/.bcp известны как набор синхронизации. Каждая таблица или статья имеет набор синхронизации.
            6. Агент выполняет создание объектов и обработку массовой копии на стороне сервера подписки (subscription) в том порядке, в котором они были сгенерированы.
               Пропускает создание объекта, если объект уже создан на стороне сервера подписки (subscription), и вы указали это во время настройки.
            7. Агент моментальных снимков сообщает о том, что произошел моментальный снимок и какие статьи/публикации были частью моментального снимка в базе данных распространения (distribution).
               Это единственное, что отправляется в базу данных распространения (distribution).
            8. Когда все наборы синхронизации завершены, агент освобождает блокировки во всех таблицах этой публикации.
               Снимок теперь считается завершенным.

        Убедитесь, что на диске достаточно места, которое содержит временный рабочий каталог (папка моментального снимка).
        
    The Log Reader Agent.
        Агент отвечает за перенос транзакций, помеченных для репликации из журнала транзакций опубликованной (published) базы данных в базу данных распространения (distribution).
        Каждая база данных, опубликованная с использованием транзакционной репликации, имеет свой собственный агент чтения журнала, который выполняется на сервере распространения (distribution).
        
        Когда статья (article) создается для публикации и подписка активируется, все записи об этой статье (article) помечены в журнале транзакций.
        
        Для каждой публикации в базе данных агент чтения журнала считывает журнал транзакций и ищет любые помеченные транзакции.
        Когда агент чтения журнала обнаруживает изменение в журнале, он считывает изменение и преобразует его в оператор SQL, соответствующий действию, которое было предпринято в статье. 
        Эти SQL операторы затем сохраняются в таблице на сервере распространения, ожидая распространения среди подписчиков.
        
        УСЕЧЕНИЕ (TRUNCATING) И БЫСТРОЕ МАССОВОЕ КОПИРОВАНИЕ (FAST BULK-COPYING) в таблицу являются нерегистрируемыми процессами.
        В таблицах, помеченных для публикации, вы не можете выполнять незарегистрированные операции, если вы временно не отключили репликацию в этой таблице.
        Затем вам нужно повторно синхронизировать таблицу с подписчиком перед повторной репликацией.
        
    The Distribution Agent.
        Агент перемещает транзакции и моментальные снимки, хранящиеся в базе данных распространения (distribution), среди подписчиков (subscribers).
        Этот агент не создается на сервере распространения (distribution) до тех пор, пока не будет определена push подписка.
        
        Подписчики (subscribers), не настроенные для немедленной синхронизации, совместно используют агента распространения, который выполняется на сервере распространения (distribution).
        Агент распространения, который работает на подписчике (subscribers), подтягивает (pull), как снимки, так и к транзакционные публикации.

        В транзакционной репликации транзакции были перемещены в базу данных распространения (distribution), и агент распространения либо выталкивает (pushes) изменения подписчикам, 
        либо вытаскивает (pulls) их у дистрибьютора, в зависимости от того, как настроены серверы.
                
    Agent History Clean Up: distribution.
        Очищает историю агентов из базы данных распространения каждые 10 минут (по умолчанию). 
        В зависимости от размера распределения (distribution) вам может потребоваться изменить частоту этого агента.
        
    Distribution Clean Up: distribution
        Этот агент очищает реплицированные транзакции из базы данных распространения (distribution) каждые 72 часа (по умолчанию).
        Этот агент используется только для снимков и транзакционных публикаций. 
        Если объем транзакций высок, частота выполнения этого агента должна быть скорректирована. 
        Вам также необходимо настроить частоту синхронизации с абонентами.
        
    Expired Subscription Clean Up
        Обнаруживает и удаляет с истекшим сроком действия подписки (subscriptions) из опубликованных (published) баз данных.
        В рамках настройки подписки (subscription) устанавливается дата истечения срока действия. 
        Этот агент обычно работает один раз в день по умолчанию, и вам не нужно его менять.

    Image Reinitialize Subscriptions Having Data Validation Failures
        Вызывается вручную. Он автоматически обнаруживает подписки (subscriptions), которые не прошли проверку данных и маркирует их для повторной инициализации.
        Это может потенциально привести к тому, что новый снимок будет применен к абоненту с ошибками проверки данных.

    Image Replication Agents Checkup
        Обнаруживает агенты репликации, которые не активно регистрируют историю. 
        Это очень важно, поскольку ошибки отладки репликации часто зависят от истории агента, которая была зарегистрирована.